import javax.ws.rs.client.ClientRequestContext;
import javax.ws.rs.client.ClientRequestFilter;
import javax.ws.rs.ext.Provider;
import java.io.IOException;

@Provider
public class XmlRequestLoggingFilter implements ClientRequestFilter {

    @Override
    public void filter(ClientRequestContext requestContext) throws IOException {
        // Log the request
        if (requestContext.hasEntity()) {
            Object entity = requestContext.getEntity();
            if (entity != null) {
                // Use JAXB to convert the entity to XML
                try {
                    JAXBContext jaxbContext = JAXBContext.newInstance(entity.getClass());
                    Marshaller marshaller = jaxbContext.createMarshaller();
                    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

                    StringWriter writer = new StringWriter();
                    marshaller.marshal(entity, writer);

                    // Log the XML
                    System.out.println("XML Request: " + writer.toString());
                } catch (JAXBException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}

public List<HierarchyRule> queryAcrossAllHierarchyLevels(Long hierarchyId) {
    // Get CriteriaBuilder from session
    CriteriaBuilder cb = session.getCriteriaBuilder();

    // Create main query for HierarchyRule
    CriteriaQuery<HierarchyRule> cq = cb.createQuery(HierarchyRule.class);
    Root<HierarchyRule> root = cq.from(HierarchyRule.class);

    // Subquery for orgHierarchy
    Subquery<Long> orgSubquery = cq.subquery(Long.class);
    Root<HierarchyTimelines> orgRoot = orgSubquery.from(HierarchyTimelines.class);
    orgSubquery.select(orgRoot.get("orgHierarchy").get("hierarchyId"))
        .where(cb.equal(orgRoot.get("orgHierarchy").get("hierarchyId"), hierarchyId));

    // Subquery for carrierHierarchy
    Subquery<Long> carrierSubquery = cq.subquery(Long.class);
    Root<HierarchyTimelines> carrierRoot = carrierSubquery.from(HierarchyTimelines.class);
    carrierSubquery.select(carrierRoot.get("carrierHierarchy").get("hierarchyId"))
        .where(cb.equal(carrierRoot.get("orgHierarchy").get("hierarchyId"), hierarchyId));

    // Subquery for contractHierarchy
    Subquery<Long> contractSubquery = cq.subquery(Long.class);
    Root<HierarchyTimelines> contractRoot = contractSubquery.from(HierarchyTimelines.class);
    contractSubquery.select(contractRoot.get("contractHierarchy").get("hierarchyId"))
        .where(cb.equal(contractRoot.get("orgHierarchy").get("hierarchyId"), hierarchyId));

    // Subquery for benefitHierarchy
    Subquery<Long> benefitSubquery = cq.subquery(Long.class);
    Root<HierarchyTimelines> benefitRoot = benefitSubquery.from(HierarchyTimelines.class);
    benefitSubquery.select(benefitRoot.get("benefitHierarchy").get("hierarchyId"))
        .where(cb.equal(benefitRoot.get("orgHierarchy").get("hierarchyId"), hierarchyId));

    // Combine subqueries in main query
    cq.where(cb.or(
        cb.in(root.get("hierarchyId")).value(orgSubquery),
        cb.in(root.get("hierarchyId")).value(carrierSubquery),
        cb.in(root.get("hierarchyId")).value(contractSubquery),
        cb.in(root.get("hierarchyId")).value(benefitSubquery)
    ));

    // Execute query and return results
    return session.createQuery(cq).getResultList();
}
